
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="author" content="xovel" />

  <meta name="format-detection" content="telephone=no" />
  <meta content="yes" name="apple-mobile-web-app-capable" />    
  <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
  
  <title>一个动画演示</title>

</head>
<body>

<style type="text/css">
.animation{ position: absolute; width:200px; height: 200px; top:50%; left: 50%; margin-top: -100px; margin-left: -100px;  background: cyan; border-radius: 100%;}
.anim-box{ height: 10px; /*background: pink;*/ width: 200px; margin-top: -5px;top: 100px; position: absolute; }
.anim-box>.anim-item{position: absolute; height: 10px; width: 10px; margin-left: -5px; border-radius: 100%; background: magenta;
  animation: tr infinite ease-in-out;}
@keyframes tr{
0% { left:0;}
50% { left: 200px;}
100% {left:0;}
}
</style>

<div class="animation">
  <div class="anim"></div>
</div>

<div class="operation">
  个数：<select onchange='ex(this.value)'>
    <option value="4">4</option>
    <option value="8" selected="selected">8</option>
    <option value="16">16</option>
    <option value="32">32</option>
  </select>
  时间：<select onchange="timeEx(this.value)">
    <option value="1">快</option>
    <option value="2" selected="selected">常规</option>
    <option value="4">慢</option>
  </select>
  <button onclick="demo()">错视演示</button>
</div>

<script type="text/javascript">
var anim = document.querySelector('.anim');
var boxes = document.querySelectorAll('.anim-box'); 
var elems = document.querySelectorAll('.anim-item'); // 动画元素

var d = 2; // 动画时间
var n = 8; // 圆点个数

var ex = function(v){
  n = v;
  var tempObj = null;
  var animObj = null;
  anim.innerHTML = '';
  for( var i = 0; i < n; i++ ){
    tempObj = document.createElement('div');
    animObj = document.createElement('div');
    tempObj.className = 'anim-box';
    animObj.className = 'anim-item';
    tempObj.style['transform'] = 'rotate(' + (180*(i)/n) + 'deg)';
    animObj.style['animation-duration'] = d + 's';
    animObj.style['animation-delay'] = (d*(i+1)/(n*2)) + 's';

    tempObj.appendChild(animObj);
    anim.appendChild(tempObj);
  }
}

var timeEx = function(v){
  d = v;
  ex(n)
}

// 默认执行8个点的常规动画
ex(n);

function demo(){
  d = 2;
  ex(8);

  var items = document.querySelectorAll('.anim-item');

  for(var i = 1; i < 8; i++ ){
    _a(i,1);
  }

  setTimeout(function(){_a(4);},d*1000);
  setTimeout(function(){_a(2);},d*2*1000);
  setTimeout(function(){_a(6);},d*3*1000);
  setTimeout(function(){_a(1);},d*4*1000);
  setTimeout(function(){_a(3);},d*4.5*1000);
  setTimeout(function(){_a(5);},d*5*1000);
  setTimeout(function(){_a(7);},d*5.2*1000);

  function _a(x,b){
    items[x].style.visibility = !!b ? 'hidden' : 'visible';
  }
}


</script>

<script type="text/template" data-note="未使用js的初始动画代码">
<style type="text/css">
.animation8{ position: absolute; width:200px; height: 200px; top:50%; left: 50%; margin-top: -100px; margin-left: -100px;  background: cyan; border-radius: 100%;}

.anim8-box{ height: 10px; /*background: pink;*/ width: 200px; margin-top: -5px;top: 100px; position: absolute; }

.anim8-box:nth-child(2){ transform:rotate(22.5deg);}
.anim8-box:nth-child(3){ transform:rotate(45deg); }
.anim8-box:nth-child(4){ transform:rotate(67.5deg); }
.anim8-box:nth-child(5){ transform:rotate(90deg); }
.anim8-box:nth-child(6){ transform:rotate(112.5deg); }
.anim8-box:nth-child(7){ transform:rotate(135deg); }
.anim8-box:nth-child(8){ transform:rotate(157.5deg); }

.anim8-box>.anim8-item{position: absolute; height: 10px; width: 10px; margin-left: -5px; border-radius: 100%; background: magenta;
  animation: tr 2s infinite ease-in-out;}

.anim8-box:nth-child(2)>.anim8-item{ animation-delay: .125s; }
.anim8-box:nth-child(3)>.anim8-item{ animation-delay: .25s;  }
.anim8-box:nth-child(4)>.anim8-item{ animation-delay: .375s;  }
.anim8-box:nth-child(5)>.anim8-item{ animation-delay: .5s;  }
.anim8-box:nth-child(6)>.anim8-item{ animation-delay: .675s;  }
.anim8-box:nth-child(7)>.anim8-item{ animation-delay: .75s;  }
.anim8-box:nth-child(8)>.anim8-item{ animation-delay: .875s;  }

@keyframes tr{
0% { left:0;}
50% { left: 200px;}
100% {left:0;}
}
</style>

<div class="animation8">
  <div class="anim8">
    <div class="anim8-box"><div class="anim8-item"></div></div>
    <div class="anim8-box"><div class="anim8-item"></div></div>
    <div class="anim8-box"><div class="anim8-item"></div></div>
    <div class="anim8-box"><div class="anim8-item"></div></div>
    <div class="anim8-box"><div class="anim8-item"></div></div>
    <div class="anim8-box"><div class="anim8-item"></div></div>
    <div class="anim8-box"><div class="anim8-item"></div></div>
    <div class="anim8-box"><div class="anim8-item"></div></div>
  </div>
</div>
</script>

</body>
</html>
